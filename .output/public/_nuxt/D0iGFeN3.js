import{l as G,r as g,v as z,m,cs as d}from"./ohOm73aH.js";import{u as p}from"./D9sJHbn3.js";import{u as J}from"./CLy-2z_b.js";const X=G("EmployeeViewModel",()=>{const o=J(),i=g(),y=g([]),u=z(),w={employee_id:null,recruitement_id:null,is_active:"active",basic_salary:"",salary_currency:"",salary_frequency:"",transport_allowance:"",housing_allowance:"",dependent_allowance:"",installation_allowance:"",arrival_shipping_allowance:"",departure_shipping_allowance:"",health_insurance:"21321.00",social_contribution:"",life_insurance:"",salary_taxes:"",home_leave:"",flight_ticket:"",installation_assistance:""},E={employee_id:null,recruitement_id:null,is_active:"active",date:"",resno:"",position_posno:"",type_of_contract:"",contract_start_date:"",contract_end_date:"",probation_end_date_1:"",probation_end_date_2:"",bg_level_equivalent:"",supervisor_posno:"",position_classification:""},k=[{label:"ID recrutement",key:"recrutement_id"},{label:"Name",key:"firstName"},{label:"Lastname",key:"lastName"},{label:"email",key:"personal_email"},{label:"phone",key:"phone"}],v=[[{key:"basic_salary",label:"Basic Salary",placeholder:"Enter Basic Salary",type:"number"},{key:"salary_currency",label:"Salary Currency",placeholder:"Enter Salary Currency",type:"text"}],[{key:"salary_frequency",label:"Salary Frequency",placeholder:"Enter Salary Frequency",type:"text"},{key:"transport_allowance",label:"Transport Allowance",placeholder:"Enter Transport Allowance",type:"number"}],[{key:"housing_allowance",label:"Housing Allowance",placeholder:"Enter Housing Allowance",type:"number"},{key:"dependent_allowance",label:"Dependent Allowance",placeholder:"Enter Dependent Allowance",type:"number"}],[{key:"installation_allowance",label:"Installation Allowance",placeholder:"Enter Installation Allowance",type:"number"},{key:"arrival_shipping_allowance",label:"Arrival Shipping Allowance",placeholder:"Enter Arrival Shipping Allowance",type:"number"}],[{key:"departure_shipping_allowance",label:"Departure Shipping Allowance",placeholder:"Enter Departure Shipping Allowance",type:"number"},{key:"health_insurance",label:"Health Insurance",placeholder:"Enter Health Insurance",type:"number"}],[{key:"social_contribution",label:"Social Contribution",placeholder:"Enter Social Contribution",type:"number"},{key:"life_insurance",label:"Life Insurance",placeholder:"Enter Life Insurance",type:"number"}],[{key:"salary_taxes",label:"Salary Taxes",placeholder:"Enter Salary Taxes",type:"number"},{key:"home_leave",component:"select",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Home Leave",placeholder:"Enter Home Leave",type:"text"}],[{key:"flight_ticket",component:"select",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Flight Ticket",placeholder:"Enter Flight Ticket",type:"text"},{key:"installation_assistance",component:"select",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Installation Assistance",placeholder:"Enter Installation Assistance",type:"text"}]],A=[[{key:"resno",label:"Res No",type:"text"},{key:"position_posno",label:"Position POS No",type:"text"}],[{key:"type_of_contract",label:"Type of Contract",type:"text"},{key:"contract_start_date",label:"Contract Start Date",type:"date"}],[{key:"contract_end_date",label:"Contract End Date",type:"date"},{key:"probation_end_date_1",label:"Probation End Date 1",type:"date"}],[{key:"probation_end_date_2",label:"Probation End Date 2",type:"date"},{key:"bg_level_equivalent",label:"BG Level Equivalent",type:"text"}],[{key:"supervisor_posno",label:"Supervisor POS No",type:"text"},{key:"position_classification",label:"Position Classification",type:"text"}]];let S={uuid:"",firstName:"",lastName:"",date_of_birth:"",country_of_birth:"",gender:"",nationality_1:"",nationality_2:"",indentity_number:"",social_security_number:"",permanent_address:"",country_of_residence:"",town_of_residence:"",phone:"",personal_email:"",marital_status:"",number_of_children:0,family_living_with_staff:!1,family_residence_location:"",spouse_works:!1,spouse_workplace:""},_={employeeId:null,full_name:"",relation:"",gender:"",date_of_birth:"",residence_or_school:"",nationality:""},f={employeeId:null,name:"",relationship:"",address:"",email:"",phone:""},b={employeeId:null,full_name:"",relationship:"",birthday:"",address:"",email:"",percentage_share:""},r=m({user:{uuid:null,firstName:"",lastName:"",date_of_birth:"",country_of_birth:"",gender:"",nationality_1:"",nationality_2:"",indentity_number:"",social_security_number:"",permanent_address:"",country_of_residence:"",town_of_residence:"",phone:"",email:"",marital_status:"",number_of_children:0,family_living_with_staff:!1,family_residence_location:"",spouse_works:!1,spouse_workplace:""},dependent:[{..._}],emergency:[{...f}],beneficiary:[{...b}]}),D={firstName:"",lastName:"",email:"",jobTitle:"",matricule:"",supervisor:"",role:""},I={employeeId:"",role:"",email:"",supervisor:"",personalEmail:"",phone2:"",phone:"",address:"",firstName:"",lastName:"",password:"",jobTitle:"",category:"",grade:"",matricule:""};const h=m({...D}),c=m({...I});async function x(){const{response:t,erreur:a}=await o.createEmployee(h);a||i.value.push(t)}async function P(){var l;const t=d();let a={...r,user:{...r.user,recrutement_id:t.params.id}};const{response:e,erreur:n}=await o.createEmployeeDraft(a);if(n){let s="";return n.data.errors?s=p().formatError((l=n==null?void 0:n.data)==null?void 0:l.errors):s=n.data.message,alert(s),n}return e&&alert("Votre formulaire a été soumis avec succès."),e}async function N(){var n;let t={...r};const{response:a,erreur:e}=await o.updateEmployeeByLink(t);if(e){let l="";return e.data.errors?l=p().formatError((n=e==null?void 0:e.data)==null?void 0:n.errors):l=e.data.message,alert(l),e}return a&&alert("Votre formulaire a été soumis avec succès."),a}async function T(t){var n;const{response:a,erreur:e}=await o.createOrUpdatePayroll(t);if(e){let l=p().formatError((n=e==null?void 0:e.data)==null?void 0:n.errors);alert(l?`Please fix the following errors:

`+l:"An error has occurred. If the problem persists, please contact IT support.")}return a&&u.add({title:"Operation completed successfully"}),a}async function C(t){var n,l;const{response:a,erreur:e}=await o.assignPostToEmployee(t);return e?(console.log((n=e==null?void 0:e.data)==null?void 0:n.message),alert((l=e==null?void 0:e.data)==null?void 0:l.message),e):(alert("Votre formulaire a été soumis avec succès."),u.add({title:"Operation completed successfully"}),a)}async function O(t){var n,l;if(!confirm("Are you sure you want to submit?"))return!1;const{response:a,erreur:e}=await o.createOrUpdateContract(t);if(e){console.log((n=e==null?void 0:e.data)==null?void 0:n.errors);let s=p().formatError((l=e==null?void 0:e.data)==null?void 0:l.errors);alert(s?`Please fix the following errors:

`+s:"An error has occurred. If the problem persists, please contact IT support.")}return a&&u.add({title:"Operation completed successfully"}),a}const L=t=>{switch(t){case"dependent":if(r.dependent.length>=5){alert("limite fixe a 5");return}r.dependent.push({..._});break;case"beneficiary":if(r.beneficiary.length>=6){alert("limite fixe a 6");return}r.beneficiary.push({...b});break;case"emergency":if(r.emergency.length>=4){alert("limite fixe a 4");return}r.emergency.push({...f});break}},q=(t,a)=>{switch(t){case"dependent":r.dependent.splice(a,1);break;case"beneficiary":r.beneficiary.splice(a,1);break;case"emergency":r.emergency.splice(a,1);break}};async function B(t){const{response:a,erreur:e}=await o.approuvedEmployeeDraft(t);e?alert(e.data.message):i.value=a}async function H(t){if(!confirm("Are you sure you want to submit this form?"))return!1;const{response:a,erreur:e}=await o.replicatePosition(t);e?alert(e.data.message):i.value=a}async function U(){const{response:t,erreur:a}=await o.getAllEmployee();a||(i.value=t)}async function F(){const{response:t,erreur:a}=await o.getAllEmployeeDraft();a||(y.value=t,console.log(y.value))}async function V(){const{id:t}=d().query,{response:a,erreur:e}=await o.getEmployee(t);e||(Object.assign(c,a),console.log(c))}async function j(){const{uuid:t}=d().params,{response:a,erreur:e}=await o.employeeFind(t);return a}async function M(t){const{data:a,erreur:e}=await o.findByLink(t),n=Object.keys(a).reduce((l,s)=>(s in S&&(l[s]=a[s]),l),{});return console.log(n),r.user={...n},r.beneficiary=[...a.beneficiaries],r.dependent=[...a.dependents],r.emergency=[...a.emergency_contacts],a}async function Y(){const{response:t,erreur:a}=await o.updateEmployee(c)}async function R(t,a){const{response:e,erreur:n}=await o.deleteEmployee(t,a);n||(Employee.value=e)}return{createEmployee:x,getAllEmployee:U,updateEmployee:Y,deleteEmployee:R,employee:i,newEmployee:h,getEmployee:V,updateEmployeeData:c,employeePayload:r,addItem:L,removeItem:q,createEmployeeDraft:P,employeeDraft:y,getAllEmployeeDraft:F,columnsDraft:k,employeeDetail:j,approuvedEmployeeDraft:B,inputPairsPayroll:v,inputPairsContract:A,createOrUpdatePayroll:T,createOrUpdateContract:O,initPayroll:w,initContract:E,findByLink:M,updateEmployeeByLink:N,assignPostToEmployee:C,replicatePosition:H}});export{X as u};
