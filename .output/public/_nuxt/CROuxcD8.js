import{_ as k}from"./BzGew5ky.js";import{_ as S}from"./Cj2iQnLi.js";import{_ as L}from"./B0nO8USS.js";import{R as g,r as _,f as F,y as N,g as U,o as M,c as B,b as E,w as O,a as m,i as w,O as V,d as C,_ as D}from"./2-DysmS7.js";import{E as H}from"./BJh6XiAJ.js";import{u as j}from"./C8XI-Lk-.js";var b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A={exports:{}};(function(d,p){(function(a,l){l()})(b,function(){function a(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function l(e,t,i){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){c(o.response,t,i)},o.onerror=function(){console.error("could not download file")},o.send()}function u(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof b=="object"&&b.global===b?b:void 0,f=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(e,t,i){var o=n.URL||n.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin===location.origin?r(s):u(s.href)?l(e,t,i):r(s,s.target="_blank")):(s.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(a(e,i),t);else if(u(e))l(e,t,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){r(o)})}}:function(e,t,i,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return l(e,t,i);var s=e.type==="application/octet-stream",T=/constructor/i.test(n.HTMLElement)||n.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||s&&T||f)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var v=y.result;v=x?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=v:location=v,o=null},y.readAsDataURL(e)}else{var R=n.URL||n.webkitURL,h=R.createObjectURL(e);o?o.location=h:location.href=h,o=null,setTimeout(function(){R.revokeObjectURL(h)},4e4)}});n.saveAs=c.saveAs=c,d.exports=c})})(A);var I=A.exports;const $=g("rapportService",()=>{async function d(a=""){let l=null,u=null;return await j({uri:`/rapport/all/employee/by/filter${a?"/"+a:""}`,success:async r=>{l=r.response.map(n=>new H(n))},error:r=>{u=r}}),{response:l,erreur:u}}async function p(a="",l=""){let u=null,r=null;return await j({uri:`/rapport/export/employee${a?"/"+a:""}${l?"/"+l:""}`,resType:"blob",success:async n=>{let f=new Blob([n]);I.saveAs(f,"world.xlsx")},error:n=>{r=n}}),{response:u,erreur:r}}return{getAllEmployeeFilter:d,exportEmployee:p}}),z=g("RapportViewModel",()=>{const d=$(),p=_();async function a(u){const{response:r,erreur:n}=await d.getAllEmployeeFilter(u);n||(p.value=r)}async function l(u,r){const{response:n,erreur:f}=await d.exportEmployee(u);f||(p.value=n)}return{getAllEmployeeFilter:a,rapportEmployee:p,exportEmployee:l}}),G={class:"content"},X={class:"content-table"},J={class:"filterelement"},K=F({__name:"index",setup(d){const p=z(),a=_();let l=_([]);const u=[{label:"Res No",key:"matricule"},{label:"Employee ID",key:"employeeId"},{label:"Staff Name",key:"staffName"},{label:"Email",key:"email"},{label:"Job Title",key:"jobTitle"},{label:"Supervisor",key:"supervisor"},{label:"Role",key:"role"}],r=[{label:"staffs who have submitted their objectives",value:1},{label:"staffs who have not submitted",value:2},{label:"staffs whose objectives have been approved",value:3},{label:"staffs whose objectives have been rejected",value:4},{label:"staff who have submitted their evaluation",value:5},{label:"staff who have not submitted their evaluation",value:6},{label:"staffs whose evaluations have been finalized",value:7},{label:"staffs whose evaluations have not been finalized",value:8}],n=async(c="")=>{await p.getAllEmployeeFilter(c),l.value=p.rapportEmployee.map(e=>{var t,i;return{matricule:e.matricule,employeeId:e.employeeId.toString(),staffName:e.firstName+" "+e.lastName,email:e.email,jobTitle:e.role,supervisor:e.supervisor?((t=e.supervisor)==null?void 0:t.firstName)+" "+((i=e.supervisor)==null?void 0:i.lastName):"N/A",role:e.role.charAt(0).toUpperCase()+e.role.slice(1)}})},f=async(c="",e="")=>{await p.exportEmployee(c,e)};return N(()=>a.value,c=>{n(c)}),U(()=>{n()}),(c,e)=>{const t=k,i=S,o=L;return M(),B("div",null,[E(o,null,{default:O(()=>[m("div",G,[e[3]||(e[3]=m("div",{class:"header"},[m("h5",null,"Rapport")],-1)),m("div",X,[m("div",J,[E(t,{options:r,name:"jobTitle",placeholder:w(a)?"View all":"filter by ",modelValue:w(a),"onUpdate:modelValue":e[0]||(e[0]=s=>V(a)?a.value=s:null)},null,8,["placeholder","modelValue"]),m("button",{class:"btn",onClick:e[1]||(e[1]=s=>f(w(a)))},e[2]||(e[2]=[C(" Export "),m("i",{class:"uil uil-export"},null,-1)]))]),E(i,{columns:u,data:w(l)},null,8,["data"])])])]),_:1})])}}}),ee=D(K,[["__scopeId","data-v-02b8d02b"]]);export{ee as default};
